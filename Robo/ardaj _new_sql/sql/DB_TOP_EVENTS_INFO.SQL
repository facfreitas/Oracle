SELECT ltrim(rtrim(upper('%CUSTOMER_NAME%'))) CUSTOMER_NAME
	   ,ltrim(rtrim('%REGION%')) REGION
	   ,ltrim(rtrim('%HOSTNAME%')) HOSTNAME
	   ,ltrim(rtrim( '%INSTANCENAME%')) INSTANCE_NAME
	,E.EVENT
	,E.WAIT_CLASS
	,TIME_WAITED_MICRO
	,ROUND(TIME_WAITED_MICRO*100/S.DBTIME,1) PCT_DB_TIME 
  FROM  V$SYSTEM_EVENT E
       ,V$EVENT_NAME N, 
	(SELECT VALUE DBTIME 
	   FROM V$SYS_TIME_MODEL 
	  WHERE upper(STAT_NAME) = 'DB time') S 
  WHERE E.EVENT_ID = N.EVENT_ID 
    AND upper(N.WAIT_CLASS) NOT IN ('Idle', 'System I/O') 
  ORDER BY PCT_DB_TIME DESC
